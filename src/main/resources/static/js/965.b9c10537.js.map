{"version":3,"file":"js/965.b9c10537.js","mappings":"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","sources":["webpack://library-system/./src/components/BookForm.vue","webpack://library-system/./src/components/BookForm.vue?f640"],"sourcesContent":["<template>\r\n  <div>\r\n    <b-container>\r\n      <h1>图书管理系统</h1>\r\n      <h4 v-if=\"book.id\">编辑图书</h4>\r\n      <h4 v-else>新增图书</h4>\r\n      <b-form @submit.prevent=\"onSubmit\">\r\n        <b-form-group label=\"标题\">\r\n          <b-form-input v-model=\"book.title\" @keydown.enter.prevent></b-form-input>\r\n        </b-form-group>\r\n        <b-form-group label=\"类型\">\r\n          <b-form-select v-model=\"book.category.id\" :options=\"categories\" value-field=\"id\"\r\n                         text-field=\"name\"></b-form-select>\r\n        </b-form-group>\r\n        <!--        <b-form-group label=\"作者\">\r\n                  <b-form-select v-model=\"book.authors\" :options=\"authors\" value-field=\"id\" text-field=\"name\" multiple></b-form-select>\r\n                </b-form-group>-->\r\n        <b-form-group label=\"作者\">\r\n          <!--          <div v-for=\"author in book.authors\" :key=\"author.id\">-->\r\n          <!--            <b-button variant=\"outline-secondary\" @click=\"removeAuthor(author.id)\">-->\r\n          <!--              {{ author.name }}-->\r\n          <!--              <b-icon icon=\"x\" variant=\"danger\" font-scale=\"1\"></b-icon>-->\r\n          <!--            </b-button>-->\r\n          <!--          </div>-->\r\n          <!--          <b-form-select v-model=\"selectedAuthorId\" :options=\"authors\" value-field=\"id\" text-field=\"name\"></b-form-select>-->\r\n          <b-form-tags\r\n              v-model=\"authorTags\"\r\n              separator=\" ,;\"\r\n              placeholder=\"输入作者用空格，逗号，分号分隔\"\r\n              remove-on-delete=true\r\n              duplicate-tag-text=\"重复作者\"\r\n              @keydown.enter.prevent\r\n          ></b-form-tags>\r\n          <!--          <b-button @click=\"addAuthor()\">添加作者</b-button>-->\r\n        </b-form-group>\r\n        <b-button type=\"submit\" variant=\"primary\">保存</b-button>\r\n        &nbsp;\r\n        <b-button variant=\"secondary\" @click=\"$router.push('/')\">取消</b-button>\r\n      </b-form>\r\n    </b-container>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default ({\r\n  name: 'BookForm',\r\n  data() {\r\n    return {\r\n      bookId: 0,\r\n      book: {\r\n        title: '',\r\n        category: {id: null},\r\n        authors: []\r\n      },\r\n      categories: [], // 所有类型\r\n      authors: [], // 所有作者\r\n      authorTags: [],\r\n      selectedAuthorId: null\r\n    }\r\n  },\r\n  methods: {\r\n    /*addAuthor() {\r\n      if (this.selectedAuthorId) {\r\n        const authorIndex = this.authors.findIndex(author => author.id === this.selectedAuthorId); // 所有作者中找出选择id的作者的数组下标\r\n        const author = this.authors.splice(authorIndex, 1)[0];\r\n        this.book.authors.push(author);\r\n        this.selectedAuthorId = null;\r\n      }\r\n    },\r\n    removeAuthor(authorId) {\r\n      const authorIndex = this.book.authors.findIndex(author => author.id === authorId); // 书的作者中找出要删除的作者的数组下标\r\n      const author = this.book.authors.splice(authorIndex, 1)[0];\r\n      this.authors.push(author);\r\n    },*/\r\n    /*updateAvailableAuthors(){\r\n      this.authors = this.authors.filter(author => !this.book.authors.some(a => a.id === author.id)); // some找出作者id, filter过滤掉\r\n    },*/\r\n    tagValidator(tag) {\r\n      // TODO\r\n    },\r\n    async getBook() {\r\n      if (this.bookId) {\r\n        try {\r\n          const response = await axios.get(`/api/books/${this.bookId}`);\r\n          this.book = response.data\r\n          this.authorTags = this.book.authors.map(item => item.name);\r\n        } catch (error) {\r\n          console.error(error);\r\n        }\r\n      }\r\n    },\r\n    async getCategories() {\r\n      try {\r\n        const response = await axios.get('/api/categories');\r\n        this.categories = response.data;\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    async getAuthors() {\r\n      try {\r\n        const response = await axios.get('/api/authors');\r\n        this.authors = response.data;\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n    },\r\n    async onSubmit() {\r\n      try {\r\n        this.book.authorTags = this.authorTags;\r\n        if (this.bookId) {\r\n          await axios.put(`/api/books/${this.bookId}`, this.book);\r\n        } else {\r\n          await axios.post('/api/books', this.book);\r\n        }\r\n      } catch (error) {\r\n        console.error(error);\r\n      }\r\n      await this.$router.push({name: 'BookList'});\r\n    }\r\n  },\r\n  async created() {\r\n    this.bookId = this.$route.query.bookId || 0;\r\n    await Promise.all([\r\n      this.getBook(),\r\n      this.getCategories(),\r\n      this.getAuthors()\r\n    ]);\r\n    // this.updateAvailableAuthors();\r\n  }\r\n});\r\n</script>","import { render } from \"./BookForm.vue?vue&type=template&id=5b909d21\"\nimport script from \"./BookForm.vue?vue&type=script&lang=js\"\nexport * from \"./BookForm.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Projects\\\\Java\\\\library-management-system\\\\frontend\\\\library-system\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","_createElementBlock","_createVNode","_component_b_container","_hoisted_1","$data","book","id","_hoisted_2","_hoisted_3","_component_b_form","onSubmit","_withModifiers","$options","_component_b_form_group","label","_component_b_form_input","title","$event","onKeydown","_cache","_withKeys","_component_b_form_select","category","options","categories","_component_b_form_tags","authorTags","separator","placeholder","_component_b_button","type","variant","onClick","_ctx","$router","push","name","data","bookId","authors","selectedAuthorId","methods","tagValidator","tag","async","this","response","axios","map","item","error","console","$route","query","Promise","all","getBook","getCategories","getAuthors","__exports__","render"],"sourceRoot":""}